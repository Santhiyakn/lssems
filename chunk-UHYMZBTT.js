import{a as te,b as ie}from"./chunk-OU56AEV4.js";import{a as D,b as s,c as q,d as B,e as R,f as h,g as G,h as j,i as U,j as z,k as Z,l as H,m as J,n as K,p as Q,q as X,r as Y}from"./chunk-47M35D6R.js";import{a as ee}from"./chunk-62Y5HVUV.js";import{a as $}from"./chunk-TWOJGJXD.js";import{D as _,F as v,H as n,I as t,J as g,K as S,L as x,M as p,O as r,P as E,S as y,T as C,U as b,W as T,ca as A,da as W,ea as L,l as P,la as k,na as O,o as F,oa as I,p as w,pa as V,s as m,t as u,y as d,z as f}from"./chunk-XDOW7T3A.js";var oe=()=>["/admin/person"];function ae(l,o){if(l&1&&(n(0,"option",34),r(1),t()),l&2){let e=o.$implicit;v("value",e._id),d(),E(e.name)}}function se(l,o){if(l&1){let e=S();n(0,"div",35),g(1,"input",36),n(2,"button",37),x("click",function(){let i=m(e).index,a=p(2);return u(a.removeItem(i))}),r(3,"Remove"),t()()}if(l&2){let e=o.index;d(),v("formControlName",e)}}function le(l,o){if(l&1){let e=S();n(0,"div",2)(1,"button",3),r(2,"Back"),t(),n(3,"h2"),r(4,"Create Person"),t(),n(5,"form",4),x("ngSubmit",function(){m(e);let i=p();return u(i.createPerson())}),n(6,"div",5)(7,"label",6),r(8,"Company Name"),t(),g(9,"input",7),t(),n(10,"div",5)(11,"label",8),r(12,"Service Provider Name"),t(),g(13,"input",9),t(),n(14,"div",5)(15,"label",10),r(16,"Service Type"),t(),n(17,"select",11),_(18,ae,2,2,"option",12),t()(),n(19,"div",5)(20,"label",13),r(21,"Phone Number"),t(),g(22,"input",14),t(),n(23,"div",5)(24,"label"),r(25,"Location:"),t(),n(26,"label",15),r(27,"City:"),t(),g(28,"input",16),n(29,"label",17),r(30,"State:"),t(),g(31,"input",18),n(32,"label",19),r(33,"Country:"),t(),g(34,"input",20),t(),n(35,"div",5)(36,"label",21),r(37,"Locations Available:"),t(),n(38,"div",22),_(39,se,4,1,"div",23),t(),n(40,"button",24),x("click",function(){m(e);let i=p();return u(i.addItem())}),r(41,"Add Item"),t()(),n(42,"div",5)(43,"label",25),r(44,"Service Description"),t(),g(45,"input",26),t(),n(46,"div",5)(47,"label",27),r(48,"Photo"),t(),g(49,"input",28),t(),n(50,"div",5)(51,"label",29),r(52,"Email"),t(),g(53,"input",30),t(),n(54,"div",5)(55,"label",31),r(56,"Website"),t(),g(57,"input",32),t(),n(58,"button",33),r(59,"Add"),t()()()}if(l&2){let e=p();d(),v("routerLink",T(4,oe)),d(4),v("formGroup",e.createPersonForm),d(13),v("ngForOf",e.services),d(21),v("ngForOf",e.locationsAvailable.controls)}}function de(l,o){if(l&1&&(n(0,"option",34),r(1),t()),l&2){let e=o.$implicit;v("value",e._id),d(),E(e.name)}}function ce(l,o){if(l&1){let e=S();n(0,"div",2)(1,"button",3),r(2,"Back"),t(),n(3,"h2"),r(4,"Update Person"),t(),n(5,"div",5)(6,"label",6),r(7,"Company Name"),t(),n(8,"input",38),b("ngModelChange",function(i){m(e);let a=p();return C(a.updateCompanyName,i)||(a.updateCompanyName=i),u(i)}),t()(),n(9,"div",5)(10,"label",8),r(11,"Person Name"),t(),n(12,"input",39),b("ngModelChange",function(i){m(e);let a=p();return C(a.updateserviceProviderName,i)||(a.updateserviceProviderName=i),u(i)}),t()(),n(13,"div",5)(14,"label",10),r(15,"Service Type"),t(),n(16,"select",40),b("ngModelChange",function(i){m(e);let a=p();return C(a.updateserviceType,i)||(a.updateserviceType=i),u(i)}),_(17,de,2,2,"option",12),t()(),n(18,"div",5)(19,"label",13),r(20,"Phone Number"),t(),n(21,"input",41),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatephoneNumber,i)||(a.updatephoneNumber=i),u(i)}),t()(),n(22,"div",5)(23,"label"),r(24,"Location"),t(),n(25,"label",42),r(26,"City"),t(),n(27,"input",43),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatecity,i)||(a.updatecity=i),u(i)}),t(),n(28,"label",44),r(29,"State"),t(),n(30,"input",45),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatestate,i)||(a.updatestate=i),u(i)}),t(),n(31,"label",46),r(32,"Country"),t(),n(33,"input",47),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatecountry,i)||(a.updatecountry=i),u(i)}),t()(),n(34,"div",5)(35,"label",31),r(36,"Website"),t(),n(37,"input",48),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatewebsite,i)||(a.updatewebsite=i),u(i)}),t()(),n(38,"div",5)(39,"label",29),r(40,"Email"),t(),n(41,"input",49),b("ngModelChange",function(i){m(e);let a=p();return C(a.updateEmail,i)||(a.updateEmail=i),u(i)}),t()(),n(42,"div",5)(43,"label",27),r(44,"Photo"),t(),n(45,"input",50),b("ngModelChange",function(i){m(e);let a=p();return C(a.updatephoto,i)||(a.updatephoto=i),u(i)}),t()(),n(46,"div",5)(47,"label",51),r(48,"Description"),t(),n(49,"input",52),b("ngModelChange",function(i){m(e);let a=p();return C(a.updateserviceDescription,i)||(a.updateserviceDescription=i),u(i)}),t()(),n(50,"button",53),x("click",function(){m(e);let i=p();return u(i.updatePerson())}),r(51,"Update"),t()()}if(l&2){let e=p();d(),v("routerLink",T(13,oe)),d(7),y("ngModel",e.updateCompanyName),d(4),y("ngModel",e.updateserviceProviderName),d(4),y("ngModel",e.updateserviceType),d(),v("ngForOf",e.services),d(4),y("ngModel",e.updatephoneNumber),d(6),y("ngModel",e.updatecity),d(3),y("ngModel",e.updatestate),d(3),y("ngModel",e.updatecountry),d(4),y("ngModel",e.updatewebsite),d(4),y("ngModel",e.updateEmail),d(4),y("ngModel",e.updatephoto),d(4),y("ngModel",e.updateserviceDescription)}}var N=class l{constructor(o,e,c,i){this.servcie=o;this.apiService=e;this.router=c;this.route=i}isCreatePage=!0;services=[];serviceId="";updateId="";locationAvailable=[];person={companyName:"",serviceProviderName:"",phoneNumber:{phoneNumber:""},location:{city:"",state:"",country:""},serviceType:"",serviceDescription:"",photo:"",email:"",website:{website:""},locationAvailable:[]};geTperson={_id:"",companyName:"",serviceProviderName:"",phoneNumber:{phoneNumber:""},location:{city:"",state:"",country:""},serviceType:"",serviceDescription:"",photo:{photo:""},email:"",website:{website:""},locationAvailable:[]};serviceType="";updateCompanyName;updateserviceProviderName;updatephoneNumber;updatecity;updatestate;updatecountry;updateserviceType;updateserviceDescription;updatephoto;updatewebsite;updateEmail;ngOnInit(){this.isCreatePage=this.servcie.personCreate,this.getServices(),this.servcie.personCreate||this.getPerson()}createPersonForm=new R({companyName:new h("",[s.required,s.minLength(5),s.maxLength(25)]),serviceProviderName:new h("",[s.required,s.minLength(1),s.maxLength(25)]),phoneNumber:new h("",[s.required,s.minLength(10)]),locationCity:new h("",[s.required,s.minLength(1)]),locationState:new h("",[s.required,s.minLength(1)]),locationCountry:new h("",[s.required,s.minLength(1)]),serviceType:new h("",[s.required,s.minLength(1)]),serviceDescription:new h(" ",[s.maxLength(100)]),photo:new h("",[s.required,s.minLength(1)]),email:new h("",[s.required,s.minLength(1)]),website:new h("",[s.required,s.minLength(1)]),locationsAvailable:new Q([])});get locationsAvailable(){return this.createPersonForm.get("locationsAvailable")}addItem(o=""){try{this.locationsAvailable.insert(0,new h(o))}catch(e){console.log(e)}}removeItem(o){try{this.locationsAvailable.removeAt(o)}catch(e){console.log(e)}}addLocationAvaiable(){try{if(this.createPersonForm.value.locationsAvailable)for(let o of this.createPersonForm.value.locationsAvailable)this.locationAvailable.push(o);return this.locationAvailable}catch(o){console.log(o)}}getServices(){try{this.apiService.getServices().subscribe(o=>{this.services=o.data,console.log(this.servcie)},o=>{console.log(o)})}catch(o){console.log(o)}}createPerson(){try{this.person.companyName=this.validatePersonValue(this.createPersonForm.value.companyName),this.person.serviceProviderName=this.validatePersonValue(this.createPersonForm.value.serviceProviderName),this.person.serviceType=this.validatePersonValue(this.createPersonForm.value.serviceType),this.person.location.city=this.validatePersonValue(this.createPersonForm.value.locationCity),this.person.location.country=this.validatePersonValue(this.createPersonForm.value.locationCountry),this.person.location.state=this.validatePersonValue(this.createPersonForm.value.locationState),this.person.email=this.validatePersonValue(this.createPersonForm.value.email),this.person.locationAvailable=this.addLocationAvaiable(),this.person.phoneNumber.phoneNumber=this.validatePersonValue(this.createPersonForm.value.phoneNumber),this.person.photo=this.validatePersonValue(this.createPersonForm.value.photo),this.person.website.website=this.validatePersonValue(this.createPersonForm.value.website),this.person.serviceDescription=this.validatePersonValue(this.createPersonForm.value.serviceDescription),this.apiService.createServiceProvider(this.person).subscribe(o=>{console.log(o.status)},o=>{this.router.navigate(["/admin/person"],{queryParams:{isCreated:"false"}}),console.log(o.message)}),this.router.navigate(["/admin/person"],{queryParams:{isCreated:"true"}})}catch(o){this.router.navigate(["/admin/person"],{queryParams:{isCreated:"false"}}),console.log(o)}}validatePersonValue(o){try{return o!=null&&o!=null?o:" "}catch(e){console.log(e)}}getPerson(){try{let o=this.route.snapshot.queryParamMap.get("id");o!=null&&(this.updateId=o,console.log(this.updateId,"Update id in getPerson")),console.log(this.updateId,"Update id in getPerson"),this.apiService.getServiceProvider(this.updateId).subscribe(e=>{console.log(e.data,"Update person info"),this.geTperson=e.data[0],this.updateCompanyName=this.geTperson.companyName,this.updateserviceProviderName=this.geTperson.serviceProviderName,this.updatephoneNumber=this.geTperson.phoneNumber.phoneNumber,this.updatecity=this.geTperson.location.city,this.updatestate=this.geTperson.location.state,this.updatecountry=this.geTperson.location.country,this.updateserviceType=this.geTperson.serviceType,this.updateserviceDescription=this.geTperson.serviceDescription,this.updatephoto=this.geTperson.photo.photo,this.updatewebsite=this.geTperson.website.website,this.updateEmail=this.geTperson.email},e=>{console.log(e)})}catch(o){console.log(o)}}updatePerson(){try{this.geTperson.companyName=this.updateCompanyName,this.geTperson.serviceProviderName=this.updateserviceProviderName,this.geTperson.phoneNumber.phoneNumber=this.updatephoneNumber,this.geTperson.location.city=this.updatecity,this.geTperson.location.state=this.updatestate,this.geTperson.location.country=this.updatecountry,this.geTperson.website.website=this.updatewebsite,this.geTperson.photo.photo=this.updatephoto,this.geTperson.serviceDescription=this.updateserviceDescription,this.geTperson.serviceType=this.updateserviceType,this.geTperson.email=this.updateEmail,this.apiService.updateServiceProvider(this.updateId,this.geTperson).subscribe(o=>{console.log(o)},o=>{console.log(o),this.router.navigate(["/admin/person"],{queryParams:{isUpdated:"false"}})}),this.router.navigate(["/admin/person"],{queryParams:{isUpdated:"true"}})}catch(o){this.router.navigate(["/admin/person"],{queryParams:{isUpdated:"false"}}),console.log(o)}}static \u0275fac=function(e){return new(e||l)(f($),f(ee),f(O),f(k))};static \u0275cmp=F({type:l,selectors:[["app-person-change"]],decls:5,vars:2,consts:[[1,"person-change"],["class","form-container",4,"ngIf"],[1,"form-container"],["type","button",1,"btn-back",3,"routerLink"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","companyName"],["type","text","id","companyName","name","companyName","formControlName","companyName"],["for","serviceProviderName"],["type","text","id","serviceProviderName","name","serviceProviderName","formControlName","serviceProviderName"],["for","serviceType"],["id","serviceType","formControlName","serviceType"],[3,"value",4,"ngFor","ngForOf"],["for","phoneNumber"],["type","text","id","phoneNumber","name","phoneNumber","formControlName","phoneNumber"],["for","locationCity"],["type","text","id","locationCity","name","locationCity","formControlName","locationCity"],["for","locationState"],["type","text","id","locationState","name","locationState","formControlName","locationState"],["for","locationCountry"],["type","text","id","locationCountry","name","locationCountry","formControlName","locationCountry"],["for","locationsAvailable"],["formArrayName","locationsAvailable"],["class","location-item",4,"ngFor","ngForOf"],["type","button",1,"btn-add",3,"click"],["for","serviceDescription"],["type","text","id","serviceDescription","name","serviceDescription","formControlName","serviceDescription"],["for","photo"],["type","text","id","photo","name","photo","formControlName","photo"],["for","email"],["type","email","id","email","name","email","formControlName","email"],["for","website"],["type","text","id","website","name","website","formControlName","website"],["type","submit",1,"btn-submit"],[3,"value"],[1,"location-item"],["placeholder","Enter value",3,"formControlName"],["type","button",1,"btn-remove",3,"click"],["type","text","id","companyName","name","companyName",3,"ngModelChange","ngModel"],["type","text","id","serviceProviderName","name","serviceProviderName",3,"ngModelChange","ngModel"],["id","serviceType",3,"ngModelChange","ngModel"],["type","text","id","phoneNumber","name","phoneNumber",3,"ngModelChange","ngModel"],["for","city"],["type","text","id","city","name","city",3,"ngModelChange","ngModel"],["for","state"],["type","text","id","state","name","state",3,"ngModelChange","ngModel"],["for","country"],["type","text","id","country","name","country",3,"ngModelChange","ngModel"],["type","text","id","website","name","website",3,"ngModelChange","ngModel"],["type","text","id","email","name","email",3,"ngModelChange","ngModel"],["type","text","id","photo","name","photo",3,"ngModelChange","ngModel"],["for","description"],["type","text","id","description","name","description",3,"ngModelChange","ngModel"],["type","button",1,"btn-submit",3,"click"]],template:function(e,c){e&1&&(n(0,"div",0)(1,"div"),g(2,"app-sidenavbar"),t(),_(3,le,60,5,"div",1)(4,ce,52,14,"div",1),t()),e&2&&(d(3),v("ngIf",c.isCreatePage),d(),v("ngIf",!c.isCreatePage))},dependencies:[A,W,I,te,j,J,K,D,H,q,B,U,Z,z,G],styles:[".person-change[_ngcontent-%COMP%]{display:flex}.form-container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px #0000001a;width:80%;font-family:Arial,sans-serif;margin:2% 5% auto 20%}.form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#0277bd}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{font-size:14px;color:#0277bd;display:block;margin-bottom:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #b3e5fc;border-radius:4px;background-color:#f7f9fc;font-size:14px}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0288d1;box-shadow:0 0 4px #81d4fa}button[_ngcontent-%COMP%]{padding:10px 15px;border-radius:4px;border:none;font-size:14px;cursor:pointer;transition:background-color .3s ease}.btn-submit[_ngcontent-%COMP%]{background-color:#0288d1;color:#fff;width:100%}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0277bd}.btn-add[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;margin-top:10px}.btn-add[_ngcontent-%COMP%]:hover{background-color:#45a049}.btn-remove[_ngcontent-%COMP%]{background-color:#e57373;color:#fff}.btn-remove[_ngcontent-%COMP%]:hover{background-color:#ef5350}.location-item[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.btn-back[_ngcontent-%COMP%]{background-color:#ef5350;color:#fff;padding:10px 15px;border-radius:4px;border:none;cursor:pointer;font-size:14px;transition:background-color .3s ease;margin-top:20px;margin-left:90%}.btn-back[_ngcontent-%COMP%]:hover{background-color:#ef5350}"]})};var pe=[{path:"",component:N}],M=class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=w({type:l});static \u0275inj=P({imports:[V.forChild(pe),V]})};var re=class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=w({type:l});static \u0275inj=P({imports:[L,M,ie,Y,X]})};export{re as a};
