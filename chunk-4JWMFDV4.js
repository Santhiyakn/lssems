import{a as F,c as L,g as j,q as A}from"./chunk-47M35D6R.js";import{a as G,b as z}from"./chunk-6WO2QSYW.js";import{a as D}from"./chunk-62Y5HVUV.js";import{a as R}from"./chunk-TWOJGJXD.js";import{D as y,F as _,H as o,I as n,J as b,K as w,L as x,M as c,N,O as d,Q as I,R as O,S as u,T as g,U as f,W as E,ca as V,da as W,ea as B,l as h,o as S,oa as T,p as v,pa as M,s as p,t as m,x as k,y as l,z as P}from"./chunk-XDOW7T3A.js";var J=()=>["/user/companies"];function K(s,i){if(s&1&&(o(0,"div",19)(1,"p")(2,"strong"),d(3,"Company Name:"),n(),d(4),n(),o(5,"p")(6,"strong"),d(7,"Review:"),n(),d(8),n()()),s&2){let e=i.$implicit,a=c(2);l(4),O(" ",a.getServiceProviderName(e.serviceProviderId)," - Rating: ",e.rating,""),l(4),I(" ",e.review,"")}}function Q(s,i){if(s&1){let e=w();o(0,"div",3)(1,"button",4),d(2,"Back"),n(),b(3,"br"),o(4,"div",5)(5,"button",6),x("click",function(){p(e);let t=c();return m(t.toUpdateUser())}),d(6,"Update"),n()(),o(7,"div",7),b(8,"img",8),n(),o(9,"div",9)(10,"div",10)(11,"label",11),d(12,"Name"),n(),o(13,"input",12),f("ngModelChange",function(t){p(e);let r=c();return g(r.user.name,t)||(r.user.name=t),m(t)}),n()(),o(14,"div",10)(15,"label",13),d(16,"Email"),n(),o(17,"input",14),f("ngModelChange",function(t){p(e);let r=c();return g(r.user.email,t)||(r.user.email=t),m(t)}),n()(),o(18,"div",10)(19,"label",15),d(20,"Phone Number"),n(),o(21,"input",16),f("ngModelChange",function(t){p(e);let r=c();return g(r.user.phoneNumber,t)||(r.user.phoneNumber=t),m(t)}),n()(),o(22,"div",17),y(23,K,9,3,"div",18),n()()()}if(s&2){let e=c();l(),_("routerLink",E(6,J)),l(7),N("src",e.user.photo,k),l(5),u("ngModel",e.user.name),l(4),u("ngModel",e.user.email),l(4),u("ngModel",e.user.phoneNumber),l(2),_("ngForOf",e.feedBacks)}}function X(s,i){if(s&1){let e=w();o(0,"div",3)(1,"button",20),x("click",function(){p(e);let t=c();return m(t.isUpdatedUser())}),d(2,"Back"),n(),o(3,"div",9)(4,"div",10)(5,"label",11),d(6,"Name"),n(),o(7,"input",12),f("ngModelChange",function(t){p(e);let r=c();return g(r.updateUserInfo.name,t)||(r.updateUserInfo.name=t),m(t)}),n()(),o(8,"div",10)(9,"label",15),d(10,"Phone Number"),n(),o(11,"input",16),f("ngModelChange",function(t){p(e);let r=c();return g(r.updateUserInfo.phoneNumber,t)||(r.updateUserInfo.phoneNumber=t),m(t)}),n()(),o(12,"div",10)(13,"label",21),d(14,"Photo URL"),n(),o(15,"input",22),f("ngModelChange",function(t){p(e);let r=c();return g(r.updateUserInfo.photo,t)||(r.updateUserInfo.photo=t),m(t)}),n()(),o(16,"div",10)(17,"label",23),d(18,"Password"),n(),o(19,"input",24),f("ngModelChange",function(t){p(e);let r=c();return g(r.updatedPassword,t)||(r.updatedPassword=t),m(t)}),n()(),o(20,"button",25),x("click",function(){p(e);let t=c();return m(t.updateUser())}),d(21,"UPDATE"),n()()()}if(s&2){let e=c();l(7),u("ngModel",e.updateUserInfo.name),l(4),u("ngModel",e.updateUserInfo.phoneNumber),l(4),u("ngModel",e.updateUserInfo.photo),l(4),u("ngModel",e.updatedPassword)}}var U=class s{constructor(i,e){this.apiServcie=i;this.service=e}isUpdateUser=!1;updatedPassword="";company={_id:"",companyName:"",serviceProviderName:"",phoneNumber:{phoneNumber:""},location:{city:"",state:"",country:""},serviceType:"",serviceDescription:"",photo:{photo:""},email:"",website:{website:""},locationAvailable:[]};user={_id:"",role:"",name:"",email:"",phoneNumber:"",photo:"",isVerified:!1};updateUserInfo={name:"",phoneNumber:"",photo:"",password:""};feedBacks=[];ngOnInit(){try{this.isUpdateUser=this.service.isUpdateUser,this.getUserProfile(),this.getUserFeedBacks()}catch(i){console.log(i)}}getUserProfile(){try{console.log(this.service.userToken);let i=this.service.userId;this.apiServcie.getUserDetail(i).subscribe(e=>{console.log(e.data[0]),this.user=e.data[0],this.updateUserInfo.name=this.user.name,this.updateUserInfo.phoneNumber=this.user.phoneNumber,this.updateUserInfo.photo=this.user.photo},e=>{console.log(e)})}catch(i){console.log(i)}}toUpdateUser(){try{this.service.isUpdateUser=!0,console.log(this.isUpdateUser),console.log(this.service.isUpdateUser),this.isUpdateUser=!0}catch(i){console.log(i)}}updateUser(){try{this.updatedPassword!=""?this.updateUserInfo.password=this.updatedPassword:this.updateUserInfo.password=void 0;let i=this.service.userId;this.apiServcie.updateUser(i,this.updateUserInfo).subscribe(e=>{console.log(e.status)},e=>{console.log(e)}),alert("Updated user info success"),this.getUserProfile(),this.isUpdateUser=!1}catch(i){console.log(i)}}isUpdatedUser(){try{this.isUpdateUser=!1}catch(i){console.log(i)}}getUserFeedBacks(){try{console.log(this.service.userId),this.apiServcie.getUserFeedBack(this.service.userId).subscribe(i=>{console.log(i),this.feedBacks=i.data},i=>{console.log(i)})}catch(i){console.log(i)}}getServiceProviderName(i){try{let e="";i&&(e=i);let a="Undefined";console.log(this.service.ServiceProviders);for(let t of this.service.ServiceProviders)console.log(t._id,e),t._id==e&&t.companyName&&(a=t.companyName);return a}catch(e){console.log(e)}}static \u0275fac=function(e){return new(e||s)(P(D),P(R))};static \u0275cmp=S({type:s,selectors:[["app-user-profile"]],decls:5,vars:2,consts:[[1,"user-profile"],[1,"user-nav"],["class","user-profile-page",4,"ngIf"],[1,"user-profile-page"],[1,"back-btn",3,"routerLink"],[1,"updateUser"],[1,"update-btn",3,"click"],[1,"user-img-container"],["alt","user_img",1,"user-img",3,"src"],[1,"user-details"],[1,"user-detail"],["for","name"],["type","text","id","name","name","name",3,"ngModelChange","ngModel"],["for","email"],["type","text","id","email","name","email",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","text","id","phoneNumber","name","phoneNumber",3,"ngModelChange","ngModel"],[1,"feedbacks"],["class","feedback",4,"ngFor","ngForOf"],[1,"feedback"],["type","button",1,"back-btn",3,"click"],["for","photo"],["type","text","id","photo","name","photo",3,"ngModelChange","ngModel"],["for","password"],["type","text","id","password","name","password",3,"ngModelChange","ngModel"],["type","button",1,"update-btn1",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1),b(2,"app-userside-nav"),n(),y(3,Q,24,7,"div",2)(4,X,22,4,"div",2),n()),e&2&&(l(3),_("ngIf",!a.isUpdateUser),l(),_("ngIf",a.isUpdateUser))},dependencies:[V,W,T,G,F,L,j],styles:["body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#f0f0f0}.user-profile[_ngcontent-%COMP%]{background-color:#fff;color:#0288d1;padding:20px;border-radius:10px;max-width:800px;margin:50px auto}.user-nav[_ngcontent-%COMP%]{margin-bottom:20px}.user-profile-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.user-img-container[_ngcontent-%COMP%]{margin-bottom:20px}.user-img[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:50%;border:4px solid white;object-fit:cover}.user-details[_ngcontent-%COMP%]{width:100%;max-width:600px}.user-detail[_ngcontent-%COMP%]{margin-bottom:15px}.user-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:700}.user-detail[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;border:1px solid #0288d1;background-color:#fff;color:#0b0c0c}button[_ngcontent-%COMP%]{padding:10px 20px;margin:10px;font-size:16px;border:none;cursor:pointer;border-radius:5px}.update-btn[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;margin-left:300%}.update-btn1[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;margin-left:50%}.update-btn[_ngcontent-%COMP%]:hover{background-color:#c62828}.back-btn[_ngcontent-%COMP%]{background-color:#d32f2f;color:#fff;margin-right:70%}.back-btn[_ngcontent-%COMP%]:hover{background-color:#c62828}.update-btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.feedback[_ngcontent-%COMP%]{background-color:#fff3;padding:15px;border-radius:8px;margin-bottom:10px}.feedback[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.feedback[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ffd600}"]})};var Y=[{path:"",component:U}],C=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=v({type:s});static \u0275inj=h({imports:[M.forChild(Y),M]})};var H=class s{static \u0275fac=function(e){return new(e||s)};static \u0275mod=v({type:s});static \u0275inj=h({imports:[B,C,z,A]})};export{H as UserProfileModule};
